from PIL import Image, ImageDraw

import cv2

def draw_single(image_path: str, bbox: list, output_path: str):
    """
    Draws a single bounding box on the image and saves it.

    :param image_path: Path to the input image.
    :param bbox: List of bounding box coordinates [x1, y1, x2, y2].
    :param output_path: Path to save the output image.
    """
    # Read the image
    image = cv2.imread(image_path)

    # Draw the bounding box
    cv2.rectangle(image, (bbox[0], bbox[1]), (bbox[2], bbox[3]), (0, 255, 0), 4)

    # Save the output image
    cv2.imwrite(output_path, image)

# Example usage:
# draw_single('input.jpg', [50, 50, 200, 200], 'output.jpg')


# Example usage
from PIL import Image, ImageDraw

def draw_multiple_bboxes(image_path: str, bboxes: list, output_path: str):
    """
    Draws multiple bounding boxes on the image and saves it.

    :param image_path: Path to the input image.
    :param bboxes: List of bounding box coordinates, where each bbox is a list [x1, y1, x2, y2].
    :param output_path: Path to save the output image.
    """
    # Open the image
    image = Image.open(image_path)

    # Create a drawing context
    draw = ImageDraw.Draw(image)

    # Draw each bounding box
    for bbox in bboxes:
        draw.rectangle(bbox, outline="red", width=2)

    # Save the output image
    image.save(output_path)

# Example usage




# bbox = [1144, 12, 1332, 45]
# image_path = '/datadrive/clasification_testing_stru_unstru/PDF_101/crop_images/pdf27-07.png'
# output_path = 'output_path.png'
bbox1 = [[[13, 5, 119, 34], [121, 5, 143, 34], [147, 5, 213, 34], [212, 5, 227, 34], [487, 4, 548, 36], [548, 6, 573, 36], [572, 6, 647, 37], [659, 8, 698, 39], [704, 9, 789, 41], [1144, 12, 1332, 45], [1343, 12, 1378, 45], [1386, 12, 1499, 45], [1922, 14, 2064, 49], [2326, 17, 2407, 46], [2739, 20, 2875, 47]], [[5, 62, 19, 95], [13, 61, 186, 96], [192, 63, 248, 96]], [[491, 122, 809, 168], [830, 124, 1181, 170], [1200, 126, 1532, 172]], [[837, 194, 1133, 238], [1134, 198, 1148, 238], [1937, 201, 2042, 241], [2314, 201, 2380, 241], [2386, 202, 2410, 240], [2693, 208, 2795, 245], [2817, 208, 2883, 245], [2890, 208, 2915, 245]], [[15, 329, 69, 369], [91, 328, 235, 369], [239, 328, 248, 367], [836, 330, 1021, 374], [1044, 331, 1224, 375], [1241, 332, 1423, 376], [1441, 333, 1738, 377], [1933, 336, 2047, 376], [2311, 340, 2411, 377], [2676, 338, 2928, 388]], [[836, 408, 850, 458], [851, 408, 959, 458], [960, 408, 975, 458]], [[14, 547, 127, 584], [130, 547, 154, 584]], [[12, 685, 67, 724], [86, 685, 154, 724], [174, 685, 226, 724], [833, 688, 943, 733], [940, 688, 971, 733], [988, 688, 1099, 733], [1119, 688, 1411, 735], [1429, 690, 1510, 735], [1530, 690, 1789, 737], [1808, 691, 1996, 738], [2013, 692, 2134, 738], [2153, 693, 2257, 738], [2261, 693, 2273, 738], [2291, 694, 2437, 740], [2434, 694, 2449, 739]], [[832, 1038, 966, 1088], [985, 1039, 1257, 1089], [1274, 1041, 1321, 1089], [1338, 1041, 1409, 1090], [1410, 1042, 1455, 1090], [1471, 1042, 1547, 1090], [1564, 1043, 1673, 1092], [2715, 1046, 2883, 1087]], [[2109, 1175, 2113, 1190]]]
bboxes = [[13, 5, 227, 34], [487, 4, 789, 41], [1144, 12, 1499, 45], [1922, 14, 2064, 49], [2326, 17, 2407, 46], [2739, 20, 2875, 47], [5, 62, 248, 96], [491, 122, 809, 168], [830, 124, 1532, 172], [837, 194, 1148, 238], [1937, 201, 2042, 241], [2314, 201, 2410, 241], [2693, 208, 2795, 245], [2817, 208, 2915, 245], [15, 329, 69, 369], [91, 328, 248, 369], [836, 330, 1021, 374], [1044, 331, 1738, 377], [1933, 336, 2047, 376], [2676, 338, 2928, 388], [2311, 340, 2411, 377], [836, 408, 975, 458], [14, 547, 154, 584], [12, 685, 226, 724], [833, 688, 2449, 740], [832, 1038, 1673, 1092], [2715, 1046, 2883, 1087], [2109, 1175, 2113, 1190]]
bbox2 = [[13, 5, 227, 34], [487, 4, 789, 41], [1144, 12, 1499, 45], [1922, 14, 2064, 49], [2326, 17, 2407, 46], [2739, 20, 2875, 47], [5, 62, 248, 96], [491, 122, 1532, 172], [837, 194, 1148, 238], [1937, 201, 2042, 241], [2314, 201, 2410, 241], [2693, 208, 2915, 245], [15, 329, 248, 369], [836, 330, 1738, 377], [1933, 336, 2047, 376], [2311, 340, 2411, 377], [2676, 338, 2928, 388], [836, 408, 975, 458], [14, 547, 154, 584], [12, 685, 226, 724], [833, 688, 2449, 740], [832, 1038, 1673, 1092], [2715, 1046, 2883, 1087], [2109, 1175, 2113, 1190]]
bbox2 = [[3, 29, 212, 59], [494, 24, 795, 61], [1205, 23, 1562, 61], [1989, 24, 2131, 56], [2378, 22, 2459, 51], [2787, 21, 2923, 49], [3, 89, 236, 118], [499, 140, 1529, 182], [876, 209, 1189, 246], [2009, 206, 2111, 242], [2369, 203, 2470, 244], [2744, 201, 2968, 245], [1152, 250, 1163, 256], [7, 352, 266, 387], [877, 346, 1237, 385], [2004, 345, 2115, 381], [2368, 345, 2469, 380], [2728, 339, 2981, 386], [5, 560, 131, 600], [6, 703, 252, 739], [876, 698, 2507, 739], [877, 1046, 1713, 1097], [2770, 1038, 2943, 1078], [1297, 1273, 1303, 1285]]
bbox2 = [(1205, 23, 1562, 61), (499, 140, 1529, 182), (876, 698, 2507, 739), (877, 1046, 1713, 1097)]
image_path = '/home/ntlpt19/TF_testing_EXT/ITF_TESTING/PDFS_imgs_10-16/pdf10/pdf10_page-0007.jpg'
# image_path = './MicrosoftTeams-image (3).png'
output_path = 'output_path.png'

# draw_multiple_bboxes(image_path, bbox2, output_path)
bbox = [833, 688, 2449, 740]
bbox = [877, 1046, 1713, 1097]


bbox = [116,453,213,453]

bbox = [
    213,
    480,
    116,
    480
]
bbox = [116,453,213,480]
bbox = [84, 32, 276, 86]
draw_single(image_path, bbox, output_path)
